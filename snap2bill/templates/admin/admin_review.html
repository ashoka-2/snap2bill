{#{% load static %}#}
{##}
{##}
{#<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">#}
{#<html xmlns="http://www.w3.org/1999/xhtml">#}
{#<head>#}
{#<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />#}
{#<title>Admin Reviews</title>#}
{##}
{#        <link rel="stylesheet" type="text/css" href="{% static 'admin/adminstyle.css' %}">#}
{##}
{##}
{##}
{##}
{#</head>#}
{##}
{#<body>#}
{##}
{##}
{##}
{##}
{##}
{#    <div class="main-content">#}
{#        <div class="admin-left-main-content">#}
{#            <div class="admin-top-left-content"><div class="admin-menu">Snap2Bill <br> Admin Menu</div></div><hr>#}
{#            <div class="admin-mid-left-content">#}
{##}
{#                <div id="navbar-section">#}
{##}
{#            <a class="nav-links" href="/admin_home"><div class="mid-left-navbars"><span>Home</span></div></a>#}
{#            <a class="nav-links" href="/admin_viewcustomer"><div class="mid-left-navbars"><span>View Customers</span></div></a>#}
{#            <a class="nav-links" href="/admin_verify"><div class="mid-left-navbars"><span>Verify Distributors</span></div></a>#}
{#            <a class="nav-links" href="/admin_verified"><div class="mid-left-navbars"><span>View Verified Distributors</span></div></a>#}
{#            <a class="nav-links" href="/admin_review"><div class="mid-left-navbars active"><span>View Reviews</span></div></a>#}
{#            <a class="nav-links" href="/admin_category"><div class="mid-left-navbars"><span>Manage Category</span></div></a>#}
{#            <a class="nav-links" href="/admin_feedback"><div class="mid-left-navbars"><span>View Feedback</span></div></a>#}
{##}
{#            </div>#}
{#            </div>#}
{#            <hr>#}
{#            <div class="admin-bottom-left-content"><div class="more-section"><span>More</span>#}
{#             <div class="setting-dropdown">#}
{#                <a href="#"><div class="setting-menu-dropdown">Setting</div> </a>#}
{#                <a href="#"><div class="setting-menu-dropdown">Switch theme</div> </a>#}
{#                <a href="/logout"><div class="setting-menu-dropdown">Logout</div></a>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{##}
{#        </div>#}
{#        <div class="admin-right-main-content">#}
{##}
{#            <form action="" method="post">#}
{#<table class="table"  border="2" cellspacing="2" cellpadding="2">#}
{#<caption>#}
{#<h1>Reviews</h1></caption>#}
{#      <tr>#}
{#          <th scope="col">Serial No.</th>#}
{#        <th scope="col">Customer</th>#}
{#        <th scope="col">Distributor</th>#}
{#                <th scope="col">Review</th>#}
{#              <th scope="col">Review Date</th>#}
{#                <th scope="col">Rating</th>#}
{#         </tr>#}
{#                {% for i in reviewdata %}#}
{##}
{#        <tr>#}
{#          <td>{{ forloop.counter }}</td>#}
{#         <td>{{ i.USER.name }}</td>#}
{#            <td>{{ i.DISTRIBUTOR.name }}</td>#}
{#         <td>&nbsp;{{ i.reviews }}</td>#}
{#         <td>&nbsp;{{ i.review_date }}</td>#}
{#            <td>{{  i.rating }}</td>#}
{#         </tr>#}
{#                {% endfor %}#}
{##}
{#        </table>#}
{#        </form>#}
{##}
{##}
{#        </div>#}
{#        </div>#}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{#<script>#}
{#    const moreBtn = document.querySelector(".more-section");#}
{#    const dropdown = document.querySelector(".setting-dropdown");#}
{##}
{#    let body = document.querySelector("body");#}
{##}
{#    moreBtn.addEventListener("click", function () {#}
{#        dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";#}
{#    });#}
{##}
{#    // Optional: close dropdown if clicked outside#}
{#    body.addEventListener("click", function (event) {#}
{#        if (!moreBtn.contains(event.target) && !dropdown.contains(event.target)) {#}
{#            dropdown.style.display = "none";#}
{#        }#}
{#    });#}
{#</script>#}
{##}
{##}
{#</body>#}
{#</html>#}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{##}
{#{% load static %}#}
{#<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">#}
{#<html xmlns="http://www.w3.org/1999/xhtml">#}
{#<head>#}
{#<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />#}
{#<title>Admin Reviews</title>#}
{#<link rel="stylesheet" type="text/css" href="{% static 'admin/adminstyle.css' %}">#}
{##}
{#<style>#}
{#  :root{#}
{#    --primary:#1565c0; --primary-dark:#003c8f; --accent:#0ea5e9;#}
{#    --text-main:#0a0a0a; --text-soft:#4b5563;#}
{#    --surface:#ffffff;#}
{#      --line:#e5e7eb;#}
{#    --radius:.8rem; --shadow:0 1.2rem 3rem rgba(2,6,23,.08);#}
{#  }#}
{##}
{#  /* Right pane */#}
{#  .admin-right-main-content{#}
{#    width:100%; min-height:100vh;#}
{#    background:#}
{#      radial-gradient(85vw 30vh at 0% -10%, rgba(21,101,192,.08), transparent 60%),#}
{#      radial-gradient(65vw 30vh at 100% 110%, rgba(14,165,233,.08), transparent 60%),#}
{#      var(--surface);#}
{#    color:var(--text-main);#}
{#    padding:clamp(1rem,2.5vw,2rem);#}
{#    box-sizing:border-box; overflow:auto;#}
{#  }#}
{##}
{#  /* Header + actions */#}
{#  .rev-header{#}
{#    display:flex; align-items:center; justify-content:space-between; gap:1rem;#}
{#    margin-block-end:1.25rem;#}
{#  }#}
{#  .rev-title{ font-size:clamp(1.3rem,2.2vw,1.8rem); font-weight:800; color:#0b1324; }#}
{#  .rev-sub{ color:var(--text-soft); font-size:clamp(.9rem,1.2vw,1rem); margin-top:.25em; }#}
{#  .rev-actions{ display:flex; gap:.75rem; flex-wrap:wrap; }#}
{##}
{#  /* Buttons */#}
{#  .btn{ display:inline-block; text-decoration:none; border-radius:9999px; font-weight:700; letter-spacing:.02em; border:0; cursor:pointer; white-space:nowrap; }#}
{#  .btn-primary{#}
{#    --g:linear-gradient(90deg,var(--primary),var(--accent),var(--primary));#}
{#    background:var(--g); background-size:200% 100%;#}
{#    color:#fff; padding:.9rem 1.2rem; box-shadow:var(--shadow);#}
{#    transition:transform .15s ease, box-shadow .2s ease; animation:moveGrad 8s linear infinite;#}
{#  }#}
{#  .btn-primary:hover{ transform:translateY(-.1rem); box-shadow:0 1.4rem 2.2rem rgba(21,101,192,.22); }#}
{#  .btn-ghost{#}
{#    background:transparent; color:var(--primary);#}
{#    border:.0625rem solid rgba(21,101,192,.4);#}
{#    padding:.85rem 1.1rem; transition:background .2s, transform .15s, border-color .2s;#}
{#  }#}
{#  .btn-ghost:hover{ background:rgba(21,101,192,.12); transform:translateY(-.08rem); border-color:var(--primary); }#}
{#  @keyframes moveGrad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}#}
{##}
{#  /* Filters bar */#}
{#  .rev-filters{#}
{#    display:grid; gap:clamp(.6rem, 1vw, .9rem);#}
{#    grid-template-columns: 1fr;#}
{#    margin-block-end:1rem;#}
{#  }#}
{#  @media (min-width: 48rem){#}
{#    .rev-filters{ grid-template-columns: 1.4fr .8fr auto; align-items:end; }#}
{#  }#}
{#  .field{#}
{#    display:flex; flex-direction:column; gap:.4rem;#}
{#  }#}
{#  .label{ font-weight:700; color:#0b1324; font-size:1rem; }#}
{#  .input, .select{#}
{#    width:100%; font-size:1rem; line-height:1.4;#}
{#    padding:.85rem 1rem; border:.0625rem solid var(--line);#}
{#    border-radius:.7rem; background:#fff; color:var(--text-main);#}
{#    outline:none; transition:border-color .2s, box-shadow .2s;#}
{#  }#}
{#  .input:focus, .select:focus{#}
{#    border-color:rgba(21,101,192,.4);#}
{#    box-shadow:0 0 0 .18rem rgba(21,101,192,.15);#}
{#  }#}
{##}
{#  /* Table */#}
{#  .rev-table-wrap{#}
{#    background:#fff; border:.0625rem solid var(--line);#}
{#    border-radius:calc(var(--radius) + .25rem);#}
{#    box-shadow:var(--shadow); overflow:auto;#}
{#  }#}
{#  table.rev-table{#}
{#    width:100%; border-collapse:separate; border-spacing:0; font-size:clamp(.95rem,1.1vw,1rem);#}
{#  }#}
{#  .rev-table thead th{#}
{#    position:sticky; top:0; z-index:1;#}
{#    background:linear-gradient(0deg,#f7faff,#ffffff);#}
{#    color:#0b1324; text-align:left; padding:1rem 1.2rem; font-weight:800;#}
{#    border-bottom:.0625rem solid var(--line);#}
{#  }#}
{#  .rev-table tbody td{#}
{#    padding:1rem 1.2rem; color:var(--text-main); border-bottom:.0625rem solid var(--line);#}
{#    vertical-align:top;#}
{#  }#}
{#  .rev-table tbody tr:nth-child(odd){ background:#fbfdff; }#}
{#  .rev-table tbody tr:hover{ background:#eef6ff; transition:background .15s; }#}
{##}
{#  .rating{#}
{#    display:inline-flex; gap:.15rem; align-items:center; font-weight:700;#}
{#  }#}
{#  .star{#}
{#    width:1.05em; height:1.05em; display:inline-block;#}
{#    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill=\"%23000\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>') center / contain no-repeat;#}
{#    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill=\"%23000\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>') center / contain no-repeat;#}
{#    background: #f59e0b;#}
{#  }#}
{##}
{#  /* Toasts (bottom-right) */#}
{#  #toast-container{#}
{#    position:fixed; right:2rem; bottom:2rem;#}
{#    display:flex; flex-direction:column; align-items:flex-end; z-index:9999; gap:.75rem;#}
{#  }#}
{#  .toast{#}
{#    background-color:var(--primary); color:#fff; padding:1rem 1.25rem; border-radius:var(--radius);#}
{#    box-shadow:0 .75rem 1.25rem rgba(0,0,0,.12);#}
{#    font-weight:600; opacity:0; transform:translateY(1rem) translateX(20%);#}
{#    animation:toastIn .35s ease forwards, toastOut .35s ease 4.3s forwards;#}
{#  }#}
{#  .toast.success{ background:#2e7d32; } .toast.error{ background:#d32f2f; }#}
{#  @keyframes toastIn{ from{opacity:0; transform:translateY(1rem) translateX(20%)} to{opacity:1; transform:translateY(0) translateX(0)} }#}
{#  @keyframes toastOut{ to{ opacity:0; transform:translateY(1rem) translateX(20%) } }#}
{#</style>#}
{#</head>#}
{##}
{#<body>#}
{##}
{#<div class="main-content">#}
{#  <div class="admin-left-main-content">#}
{#    <div class="admin-top-left-content"><div class="admin-menu">Snap2Bill <br> Admin Menu</div></div><hr>#}
{#    <div class="admin-mid-left-content">#}
{#      <div id="navbar-section">#}
{#        <a class="nav-links" href="/admin_home"><div class="mid-left-navbars"><span>Home</span></div></a>#}
{#        <a class="nav-links" href="/admin_viewcustomer"><div class="mid-left-navbars"><span>View Customers</span></div></a>#}
{#        <a class="nav-links" href="/admin_verify"><div class="mid-left-navbars"><span>Verify Distributors</span></div></a>#}
{#        <a class="nav-links" href="/admin_verified"><div class="mid-left-navbars"><span>View Verified Distributors</span></div></a>#}
{#        <a class="nav-links" href="/admin_review"><div class="mid-left-navbars active"><span>View Reviews</span></div></a>#}
{#        <a class="nav-links" href="/admin_category"><div class="mid-left-navbars"><span>Manage Category</span></div></a>#}
{#        <a class="nav-links" href="/admin_feedback"><div class="mid-left-navbars"><span>View Feedback</span></div></a>#}
{#      </div>#}
{#    </div>#}
{#    <hr>#}
{#    <div class="admin-bottom-left-content"><div class="more-section"><span>More</span>#}
{#      <div class="setting-dropdown">#}
{#        <a href="#"><div class="setting-menu-dropdown">Setting</div></a>#}
{#        <a href="#"><div class="setting-menu-dropdown">Switch theme</div></a>#}
{#        <a href="/logout"><div class="setting-menu-dropdown">Logout</div></a>#}
{#      </div>#}
{#    </div></div>#}
{#  </div>#}
{##}
{#  <!-- ========= RIGHT: Reviews ========= -->#}
{#  <div class="admin-right-main-content">#}
{##}
{#    {% if messages %}#}
{#      <div id="toast-container">#}
{#        {% for message in messages %}#}
{#          <div class="toast {{ message.tags }}">{{ message }}</div>#}
{#        {% endfor %}#}
{#      </div>#}
{#    {% endif %}#}
{##}
{#    <!-- Header -->#}
{#    <div>#}
{#      <div class="rev-header">#}
{#        <div>#}
{#          <div class="rev-title">Reviews</div>#}
{#          <div class="rev-sub">Browse and filter user feedback for distributors.</div>#}
{#        </div>#}
{#        <div class="rev-actions">#}
{#          <a class="btn btn-ghost" href="/admin_home">Dashboard</a>#}
{#          <a class="btn btn-primary" href="/admin_verified">Verified Distributors</a>#}
{#        </div>#}
{#      </div>#}
{##}
{#      <!-- Filters -->#}
{#      <div class="rev-filters">#}
{#        <div class="field">#}
{#          <label class="label" for="search">Search (Customer / Distributor / Review)</label>#}
{#          <input id="search" class="input" type="text" placeholder="Type to filter… (e.g., 'Aman', 'Great service')" />#}
{#        </div>#}
{##}
{#        <div class="field">#}
{#          <label class="label" for="minRating">Minimum Rating</label>#}
{#          <select id="minRating" class="select">#}
{#            <option value="0">All ratings</option>#}
{#            <option value="1">1★ and above</option>#}
{#            <option value="2">2★ and above</option>#}
{#            <option value="3">3★ and above</option>#}
{#            <option value="4">4★ and above</option>#}
{#            <option value="5">5★ only</option>#}
{#          </select>#}
{#        </div>#}
{##}
{#        <div class="field">#}
{#          <label class="label" style="opacity:0;">Apply</label>#}
{#          <button id="clearFilters" type="button" class="btn btn-ghost">Clear filters</button>#}
{#        </div>#}
{#      </div>#}
{#    </div>#}
{##}
{#    <!-- Table -->#}
{#    <div class="rev-table-wrap">#}
{#      <form action="" method="post">#}
{#        {% csrf_token %}#}
{#        <table class="rev-table" id="reviewsTable">#}
{#          <thead>#}
{#            <tr>#}
{#              <th style="width:10rem;">Serial No.</th>#}
{#              <th>Customer</th>#}
{#              <th>Distributor</th>#}
{#              <th>Review</th>#}
{#              <th>Review Date</th>#}
{#              <th style="width:10rem;">Rating</th>#}
{#            </tr>#}
{#          </thead>#}
{#          <tbody>#}
{#            {% for i in reviewdata %}#}
{#            <tr>#}
{#              <td data-col="serial">{{ forloop.counter }}</td>#}
{#              <td data-col="customer">{{ i.USER.name }}</td>#}
{#              <td data-col="distributor">{{ i.DISTRIBUTOR.name }}</td>#}
{#              <td data-col="review">{{ i.reviews }}</td>#}
{#              <td data-col="date">{{ i.review_date }}</td>#}
{#              <td data-col="rating">#}
{#                <span class="rating" data-rating="{{ i.rating|default:0 }}">#}
{#                  <span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span>#}
{#                  <span style="margin-left:.35rem;">{{ i.rating }}</span>#}
{#                </span>#}
{#              </td>#}
{#            </tr>#}
{#            {% empty %}#}
{#            <tr><td colspan="6" style="text-align:center; color:var(--text-soft); padding:2rem;">No reviews yet.</td></tr>#}
{#            {% endfor %}#}
{#          </tbody>#}
{#        </table>#}
{#      </form>#}
{#    </div>#}
{##}
{#  </div>#}
{#</div>#}
{##}
{#<script>#}
{#  // Sidebar dropdown#}
{#  const moreBtn=document.querySelector(".more-section");#}
{#  const dropdown=document.querySelector(".setting-dropdown");#}
{#  document.body.addEventListener("click",e=>{#}
{#    if(moreBtn && moreBtn.contains(e.target)){#}
{#      e.stopPropagation();#}
{#      dropdown.style.display = dropdown.style.display==='block' ? 'none' : 'block';#}
{#    }else if(dropdown && !dropdown.contains(e.target)){#}
{#      dropdown.style.display='none';#}
{#    }#}
{#  });#}
{##}
{#  // Toast auto-remove#}
{#  setTimeout(()=>document.querySelectorAll('.toast').forEach(t=>t.remove()),6000);#}
{##}
{#  // Ratings stars fill#}
{#  document.querySelectorAll('.rating').forEach(r => {#}
{#    const val = parseInt(r.getAttribute('data-rating') || '0', 10);#}
{#    const stars = r.querySelectorAll('.star');#}
{#    stars.forEach((s, idx) => {#}
{#      s.style.opacity = (idx < val) ? '1' : '.25';#}
{#    });#}
{#  });#}
{##}
{#  // Client-side filters#}
{#  const searchInput = document.getElementById('search');#}
{#  const minRatingSel = document.getElementById('minRating');#}
{#  const clearBtn = document.getElementById('clearFilters');#}
{#  const rows = Array.from(document.querySelectorAll('#reviewsTable tbody tr'));#}
{##}
{#  function normalize(t){ return (t||'').toString().toLowerCase().trim(); }#}
{##}
{#  function applyFilters(){#}
{#    const query = normalize(searchInput.value);#}
{#    const minR = parseInt(minRatingSel.value || '0', 10);#}
{##}
{#    rows.forEach(row=>{#}
{#      const customer = normalize(row.querySelector('[data-col="customer"]')?.textContent);#}
{#      const distributor = normalize(row.querySelector('[data-col="distributor"]')?.textContent);#}
{#      const review = normalize(row.querySelector('[data-col="review"]')?.textContent);#}
{#      const rating = parseInt(row.querySelector('[data-col="rating"] .rating')?.getAttribute('data-rating') || '0', 10);#}
{##}
{#      const matchesText = !query || customer.includes(query) || distributor.includes(query) || review.includes(query);#}
{#      const matchesRating = rating >= minR;#}
{##}
{#      row.style.display = (matchesText && matchesRating) ? '' : 'none';#}
{#    });#}
{#  }#}
{##}
{#  searchInput.addEventListener('input', applyFilters);#}
{#  minRatingSel.addEventListener('change', applyFilters);#}
{#  clearBtn.addEventListener('click', ()=>{#}
{#    searchInput.value = '';#}
{#    minRatingSel.value = '0';#}
{#    applyFilters();#}
{#  });#}
{##}
{#  // initial pass (no filter)#}
{#  applyFilters();#}
{#</script>#}
{##}
{#</body>#}
{#</html>#}
{##}
{##}
{##}
{#{% load static %}#}
{#<!DOCTYPE html>#}
{#<html lang="en">#}
{#<head>#}
{#<meta charset="UTF-8">#}
{#<title>Admin Reviews</title>#}
{#<link rel="stylesheet" href="{% static 'admin/adminstyle.css' %}">#}
{##}
{#<style>#}
{#  :root{#}
{#    --primary:#1565c0; --primary-dark:#003c8f; --accent:#0ea5e9;#}
{#    --text-main:#0a0a0a; --text-soft:#4b5563;#}
{#    --surface:#ffffff; --line:#e5e7eb;#}
{#    --radius:.8rem; --shadow:0 1.2rem 3rem rgba(2,6,23,.08);#}
{#  }#}
{##}
{#  .admin-right-main-content{#}
{#    width:100%; min-height:100vh;#}
{#    background:#}
{#      radial-gradient(85vw 30vh at 0% -10%, rgba(21,101,192,.08), transparent 60%),#}
{#      radial-gradient(65vw 30vh at 100% 110%, rgba(14,165,233,.08), transparent 60%),#}
{#      var(--surface);#}
{#    color:var(--text-main);#}
{#    padding:clamp(1rem,2.5vw,2rem);#}
{#    box-sizing:border-box; overflow:auto;#}
{#  }#}
{##}
{#  .rev-header{#}
{#    display:flex; align-items:center; justify-content:space-between;#}
{#    margin-bottom:1.25rem; gap:1rem;#}
{#  }#}
{#  .rev-title{ font-size:1.8rem; font-weight:800; color:#0b1324; }#}
{#  .rev-sub{ color:var(--text-soft); }#}
{##}
{#  .btn{#}
{#      text-decoration: none;#}
{#    display:inline-block; border:none; border-radius:9999px;#}
{#    font-weight:700; cursor:pointer; padding:.85rem 1.2rem;#}
{#  }#}
{#  .btn-primary{#}
{#    background:linear-gradient(90deg,var(--primary),var(--accent));#}
{#    color:#fff; box-shadow:var(--shadow);#}
{#  }#}
{#  .btn-ghost{#}
{#    background:transparent; border:.0625rem solid rgba(21,101,192,.4);#}
{#    color:var(--primary);#}
{#  }#}
{##}
{#  .rev-filters{ display:grid; gap:.9rem; margin-bottom:1rem; }#}
{#  @media (min-width:48rem){#}
{#    .rev-filters{ grid-template-columns:1.4fr .8fr auto; align-items:end; }#}
{#  }#}
{##}
{#  .input, .select{#}
{#    width:100%; padding:.85rem 1rem; border:.0625rem solid var(--line);#}
{#    border-radius:.7rem; background:#fff; color:var(--text-main);#}
{#  }#}
{##}
{#  .rev-table-wrap{#}
{#    background:#fff; border:.0625rem solid var(--line);#}
{#    border-radius:.8rem; box-shadow:var(--shadow); overflow:auto;#}
{#  }#}
{#  table.rev-table{#}
{#    width:100%; border-collapse:separate; border-spacing:0;#}
{#  }#}
{#  .rev-table th, .rev-table td{#}
{#    padding:1rem 1.2rem; border-bottom:.0625rem solid var(--line);#}
{#    text-align:left; vertical-align:middle;#}
{#  }#}
{#  .rev-table thead th{#}
{#    background:linear-gradient(0deg,#f7faff,#ffffff);#}
{#    font-weight:800; color:#0b1324;#}
{#  }#}
{#  .rev-table tbody tr:nth-child(odd){ background:#fbfdff; }#}
{#  .rev-table tbody tr:hover{ background:#eef6ff; }#}
{##}
{#  /* STAR STYLE */#}
{#  .stars {#}
{#    display: inline-flex;#}
{#    align-items: center;#}
{#    gap: 2px;#}
{#  }#}
{#  .stars svg {#}
{#    width: 18px;#}
{#    height: 18px;#}
{#    fill: #fbbf24; /* amber-400 */#}
{#  }#}
{#  .stars svg.empty {#}
{#    fill: #d1d5db; /* gray-300 */#}
{#  }#}
{##}
{#</style>#}
{#</head>#}
{##}
{#<body>#}
{##}
{#<div class="main-content">#}
{#  <!-- LEFT SIDEBAR -->#}
{#  <div class="admin-left-main-content">#}
{#    <div class="admin-top-left-content"><div class="admin-menu">Snap2Bill <br> Admin Menu</div></div><hr>#}
{#    <div id="navbar-section" class="admin-mid-left-content">#}
{#      <a class="nav-links" href="/admin_home"><div class="mid-left-navbars"><span>Home</span></div></a>#}
{#      <a class="nav-links" href="/admin_viewcustomer"><div class="mid-left-navbars"><span>View Customers</span></div></a>#}
{#      <a class="nav-links" href="/admin_verify"><div class="mid-left-navbars"><span>Verify Distributors</span></div></a>#}
{#      <a class="nav-links" href="/admin_verified"><div class="mid-left-navbars"><span>View Verified Distributors</span></div></a>#}
{#      <a class="nav-links active" href="/admin_review"><div class="mid-left-navbars"><span>View Reviews</span></div></a>#}
{#      <a class="nav-links" href="/admin_category"><div class="mid-left-navbars"><span>Manage Category</span></div></a>#}
{#      <a class="nav-links" href="/admin_feedback"><div class="mid-left-navbars"><span>View Feedback</span></div></a>#}
{#    </div>#}
{#    <hr>#}
{#    <div class="admin-bottom-left-content">#}
{#      <div class="more-section"><span>More</span>#}
{#        <div class="setting-dropdown">#}
{#          <a href="#"><div class="setting-menu-dropdown">Setting</div></a>#}
{#          <a href="#"><div class="setting-menu-dropdown">Switch theme</div></a>#}
{#          <a href="/logout"><div class="setting-menu-dropdown">Logout</div></a>#}
{#        </div>#}
{#      </div>#}
{#    </div>#}
{#  </div>#}
{##}
{#  <!-- RIGHT PANEL -->#}
{#  <div class="admin-right-main-content">#}
{#    <div class="rev-header">#}
{#      <div>#}
{#        <div class="rev-title">Reviews</div>#}
{#        <div class="rev-sub">Browse and filter customer reviews for distributors.</div>#}
{#      </div>#}
{#      <div class="rev-actions">#}
{#        <a class="btn btn-ghost" href="/admin_home">Dashboard</a>#}
{#        <a class="btn btn-primary" href="/admin_verified">Verified Distributors</a>#}
{#      </div>#}
{#    </div>#}
{##}
{#    <!-- FILTERS -->#}
{#    <div class="rev-filters">#}
{#      <input id="search" class="input" type="text" placeholder="Search (Customer / Distributor / Review)">#}
{#      <select id="minRating" class="select">#}
{#        <option value="0">All ratings</option>#}
{#        <option value="1">1★ and above</option>#}
{#        <option value="2">2★ and above</option>#}
{#        <option value="3">3★ and above</option>#}
{#        <option value="4">4★ and above</option>#}
{#        <option value="5">5★ only</option>#}
{#      </select>#}
{#      <button id="clearFilters" type="button" class="btn btn-ghost">Clear filters</button>#}
{#    </div>#}
{##}
{#    <!-- TABLE -->#}
{#    <div class="rev-table-wrap">#}
{#      <table class="rev-table" id="reviewsTable">#}
{#        <thead>#}
{#          <tr>#}
{#            <th>Serial No.</th>#}
{#            <th>Customer</th>#}
{#            <th>Distributor</th>#}
{#            <th>Review</th>#}
{#            <th>Date</th>#}
{#            <th>Rating</th>#}
{#          </tr>#}
{#        </thead>#}
{#        <tbody>#}
{#          {% for i in reviewdata %}#}
{#          <tr>#}
{#            <td>{{ forloop.counter }}</td>#}
{#            <td>{{ i.USER.name }}</td>#}
{#            <td>{{ i.DISTRIBUTOR.name }}</td>#}
{#            <td>{{ i.reviews }}</td>#}
{#            <td>{{ i.review_date}}</td>#}
{#           <td>#}
{#                    <div class="stars" data-rating="{{ i.rating }}">#}
{#                    {% for star in "12345" %}#}
{#                  {% if forloop.counter <= i.rating %}#}
{#                    <span style="color:gold;">★</span>#}
{#                  {% else %}#}
{#                    <span style="color:lightgray;">★</span>#}
{#                 {% endif %}#}
{#                    {% endfor %}#}
{#              <span style="margin-left:4px;">{{ i.rating }}/5</span>#}
{#                </div>#}
{#                </td>#}
{#          </tr>#}
{#          {% empty %}#}
{#          <tr><td colspan="6" style="text-align:center; color:#6b7280; padding:2rem;">No reviews yet.</td></tr>#}
{#          {% endfor %}#}
{#        </tbody>#}
{#      </table>#}
{#    </div>#}
{##}
{#  </div>#}
{#</div>#}
{##}
{#<script>#}
{#  // Sidebar dropdown toggle#}
{#  const moreBtn=document.querySelector(".more-section");#}
{#  const dropdown=document.querySelector(".setting-dropdown");#}
{#  document.body.addEventListener("click",e=>{#}
{#    if(moreBtn && moreBtn.contains(e.target)){#}
{#      e.stopPropagation();#}
{#      dropdown.style.display = dropdown.style.display==='block' ? 'none' : 'block';#}
{#    }else if(dropdown && !dropdown.contains(e.target)){#}
{#      dropdown.style.display='none';#}
{#    }#}
{#  });#}
{##}
{#  // Filters logic#}
{#  const searchInput = document.getElementById('search');#}
{#  const minRatingSel = document.getElementById('minRating');#}
{#  const clearBtn = document.getElementById('clearFilters');#}
{#  const rows = Array.from(document.querySelectorAll('#reviewsTable tbody tr'));#}
{##}
{#  function normalize(t){ return (t||'').toLowerCase().trim(); }#}
{##}
{#  function applyFilters(){#}
{#    const query = normalize(searchInput.value);#}
{#    const minR = parseInt(minRatingSel.value || '0', 10);#}
{##}
{#    rows.forEach(row=>{#}
{#      const customer = normalize(row.cells[1]?.textContent);#}
{#      const distributor = normalize(row.cells[2]?.textContent);#}
{#      const review = normalize(row.cells[3]?.textContent);#}
{#      const rating = parseInt(row.querySelector('.stars')?.getAttribute('data-rating') || '0', 10);#}
{##}
{#      const matchText = !query || customer.includes(query) || distributor.includes(query) || review.includes(query);#}
{#      const matchRating = rating >= minR;#}
{##}
{#      row.style.display = (matchText && matchRating) ? '' : 'none';#}
{#    });#}
{#  }#}
{##}
{#  searchInput.addEventListener('input', applyFilters);#}
{#  minRatingSel.addEventListener('change', applyFilters);#}
{#  clearBtn.addEventListener('click', ()=>{ searchInput.value=''; minRatingSel.value='0'; applyFilters(); });#}
{##}
{#  applyFilters();#}
{#</script>#}
{##}
{#</body>#}
{#</html>#}


{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="utf-8" />
<title>Admin Reviews | Snap2Bill</title>
<link rel="stylesheet" type="text/css" href="{% static 'admin/adminstyle.css' %}">
<!-- Remix Icons -->
<link
  href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css"
  rel="stylesheet"
/>

<style>

  .admin-right-main-content{
    width:100%; min-height:100vh;
    background:
      radial-gradient(85vw 30vh at 0% -10%, rgba(21,101,192,.08), transparent 60%),
      radial-gradient(65vw 30vh at 100% 110%, rgba(14,165,233,.08), transparent 60%),
      var(--surface);
    color:var(--text-main);
    padding:clamp(1rem,2.5vw,2rem);
    box-sizing:border-box; overflow:auto;
    transition: background .4s ease, color .4s ease;
  }

  .fb-header{ display:flex; align-items:center; justify-content:space-between; gap:1rem; margin-block-end:1.25rem; }
  .fb-title{ font-size:clamp(1.3rem,2.2vw,1.8rem); font-weight:800; color:var(--text-main); display:flex; align-items:center; gap:.5rem; }
  .fb-sub{ color:var(--text-soft); font-size:clamp(.9rem,1.2vw,1rem); margin-top:.25em; }
  .fb-actions{ display:flex; gap:.75rem; flex-wrap:wrap; }

  .btn{ display:inline-flex; align-items:center; gap:.4rem; text-decoration:none; border-radius:9999px; font-weight:700; border:0; cursor:pointer; transition:all .3s ease; }
  .btn i{ font-size:1.2rem; }
  .btn-primary{ background:linear-gradient(90deg,var(--primary),var(--accent),var(--primary)); color:#fff; padding:.9rem 1.2rem; box-shadow:var(--shadow); }
  .btn-primary:hover{ transform:translateY(-3px); opacity:.9; }
  .btn-ghost{ background:transparent; color:var(--primary); border:.0625rem solid rgba(21,101,192,.4); padding:.85rem 1.1rem; }
  .btn-ghost:hover{ background:rgba(21,101,192,0.08); transform:translateY(-2px); }

  .fb-table-wrap{ background:#fff; border:.0625rem solid var(--line); border-radius:calc(var(--radius) + .25rem); box-shadow:var(--shadow); overflow:auto; transition: background .3s ease; }
  [data-theme="dark"] .fb-table-wrap{ background:#1e293b; }

  table.fb-table{ width:100%; border-collapse:separate; border-spacing:0; }
  .fb-table thead th{
    position:sticky; top:0; background:linear-gradient(0deg,#f7faff,#ffffff);
    color:var(--text-main); text-align:left; padding:1rem 1.2rem; font-weight:800;
    transition:background .3s ease;
  }

</style>
</head>

<body>

<div class="main-content">
  <!-- Sidebar -->
  <div class="admin-left-main-content">
    <div class="admin-top-left-content"><div class="admin-menu">Snap2Bill <br> Admin Menu</div></div><hr>
    <div class="admin-mid-left-content">
      <div id="navbar-section">
        <a class="nav-links" href="/admin_home"><div class="mid-left-navbars"><i class="ri-home-4-line"></i><span>Home</span></div></a>
        <a class="nav-links" href="/admin_viewcustomer"><div class="mid-left-navbars"><i class="ri-user-3-line"></i><span>View Customers</span></div></a>
        <a class="nav-links" href="/admin_verify"><div class="mid-left-navbars"><i class="ri-shield-check-line"></i><span>Verify Distributors</span></div></a>
        <a class="nav-links" href="/admin_verified"><div class="mid-left-navbars"><i class="ri-award-line"></i><span>View Verified Distributors</span></div></a>
          <a class="nav-links" href="/admin_category"><div class="mid-left-navbars "><i class="ri-layout-grid-line"></i><span>Manage Category</span></div></a>
        <a class="nav-links" href="/admin_review"><div class="mid-left-navbars active"><i class="ri-star-line"></i><span>View Reviews</span></div></a>
        <a class="nav-links" href="/admin_feedback"><div class="mid-left-navbars "><i class="ri-feedback-line"></i><span>View Feedback</span></div></a>
      </div>
    </div>
    <hr>
    <div class="admin-bottom-left-content">
      <div class="more-section"><span><i class="ri-settings-3-line"></i> More</span>
        <div class="setting-dropdown">
          <a href="#"><div class="setting-menu-dropdown"><i class="ri-tools-line"></i> Settings</div></a>
          <a id="themeToggle" type="button" class="setting-menu-dropdown theme-btn">
            <i id="themeIcon" class="ri-sun-line"></i> Switch theme
          </a>
          <a href="/logout"><div class="setting-menu-dropdown"><i class="ri-logout-box-line"></i> Logout</div></a>
        </div>
      </div>
    </div>
  </div>

  <!-- Right Content -->
  <div class="admin-right-main-content">

    <div class="fb-header">
      <div>
        <div class="fb-title"><i class="ri-star-line"></i> Reviews</div>
        <div class="fb-sub">All customer reviews for distributors</div>
      </div>
      <div class="fb-actions">
        <a class="btn btn-ghost" href="/admin_home"><i class="ri-dashboard-line"></i> Dashboard</a>
        <a class="btn btn-primary" href="/admin_viewcustomer"><i class="ri-user-3-line"></i> Customers</a>
      </div>
    </div>

    <div class="fb-table-wrap">
      <table class="fb-table">
        <thead>
          <tr>
            <th><i class="ri-hashtag"></i> S.No</th>
            <th><i class="ri-user-line"></i> Customer</th>
            <th><i class="ri-store-2-line"></i> Distributor</th>
            <th><i class="ri-chat-3-line"></i> Review</th>
            <th><i class="ri-star-fill"></i> Rating</th>
            <th><i class="ri-calendar-line"></i> Date</th>
          </tr>
        </thead>
        <tbody>
          {% for r in reviewdata %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ r.USER.name }}</td>
            <td>{{ r.DISTRIBUTOR.name }}</td>
            <td>{{ r.reviews }}</td>
            <td>
              {% for i in "12345"|slice:":" %}
                {% if forloop.counter <= r.rating %}
                  <i class="ri-star-fill" style="color:gold;"></i>
                {% else %}
                  <i class="ri-star-line" style="color:gray;"></i>
                {% endif %}
              {% endfor %}
            </td>
            <td>{{ r.review_date }}</td>
          </tr>
          {% empty %}
          <tr><td colspan="6" style="text-align:center; color:var(--text-soft); padding:2rem;">No reviews yet.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</div>

<script>
  // Sidebar dropdown
  const moreBtn = document.querySelector(".more-section");
  const dropdown = document.querySelector(".setting-dropdown");
  document.body.addEventListener("click", e => {
    if (moreBtn && moreBtn.contains(e.target)) {
      e.stopPropagation();
      dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
    } else if (dropdown && !dropdown.contains(e.target)) {
      dropdown.style.display = "none";
    }
  });

  // Theme toggle with Remix Icons
  const root = document.documentElement;
  const themeBtn = document.getElementById('themeToggle');
  const themeIcon = document.getElementById('themeIcon');

  const savedTheme = localStorage.getItem('theme') || 'light';
  root.setAttribute('data-theme', savedTheme);
  themeIcon.className = savedTheme === 'dark' ? 'ri-moon-line' : 'ri-sun-line';

  themeBtn.addEventListener('click', () => {
    const current = root.getAttribute('data-theme');
    const next = current === 'dark' ? 'light' : 'dark';
    root.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    themeIcon.className = next === 'dark' ? 'ri-moon-line' : 'ri-sun-line';
  });
</script>
</body>
</html>
