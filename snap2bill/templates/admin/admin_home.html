{% load static %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Admin Home</title>

<link rel="icon" type="image/png" id="dynamic-favicon" href="{% static 'images/favicon.png' %}">

<link href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css" rel="stylesheet"/>
<link rel="stylesheet" type="text/css" href="{% static 'admin/adminstyle.css' %}">
<script src="{% static 'scripts/setting.js' %}"></script>

<style>
    /* =============================
       üìä DASHBOARD SPECIFIC STYLES
       ============================= */

    .dashboard-container {
        padding: 2rem;
        width: 100%;
    }

    .welcome-banner {
        margin-bottom: 2rem;
    }
    .welcome-banner h1 {
        font-size: 1.8rem;
        color: var(--text-main);
        margin-bottom: 0.5rem;
    }
    .welcome-banner p {
        color: var(--text-soft);
    }

    /* --- Stats Grid --- */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2.5rem;
    }

    .stat-card {
        background-color: var(--surface);
        padding: 1.5rem;
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        border: 1px solid var(--line);
        display: flex;
        align-items: center;
        gap: 1.2rem;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 1rem 2rem rgba(0,0,0,0.1);
    }

    .icon-box {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        flex-shrink: 0;
    }

    .stat-info h3 {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--text-main);
        line-height: 1.2;
    }
    .stat-info p {
        color: var(--text-soft);
        font-size: 0.9rem;
        margin-top: 0.2rem;
    }

    /* --- Card Color Variations --- */

    /* Blue (Customers) */
    .card-blue .icon-box { background: rgba(21, 101, 192, 0.1); color: #1565c0; }

    /* Orange (Pending) */
    .card-orange .icon-box { background: rgba(255, 152, 0, 0.1); color: #ff9800; }

    /* Green (Verified) */
    .card-green .icon-box { background: rgba(76, 175, 80, 0.1); color: #4caf50; }

    /* Purple (Products) */
    .card-purple .icon-box { background: rgba(156, 39, 176, 0.1); color: #9c27b0; }

    /* Red (Distributor Feedback) */
    .card-red .icon-box { background: rgba(244, 67, 54, 0.1); color: #f44336; }

    /* Teal (Customer Feedback) */
    .card-teal .icon-box { background: rgba(0, 150, 136, 0.1); color: #009688; }

    /* Yellow/Gold (Reviews) */
    .card-yellow .icon-box { background: rgba(255, 193, 7, 0.1); color: #ffc107; }

    /* Indigo (Categories) */
    .card-indigo .icon-box { background: rgba(63, 81, 181, 0.1); color: #3f51b5; }


    /* --- Quick Actions Section --- */
    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
    .section-title {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--text-main);
    }

    .quick-actions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2.5rem;
    }

    .action-btn {
        background-color: var(--surface);
        border: 1px dashed var(--primary);
        color: var(--primary);
        padding: 1rem;
        border-radius: var(--radius);
        text-align: center;
        text-decoration: none;
        font-weight: 600;
        transition: 0.2s;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
    }
    .action-btn i { font-size: 1.5rem; }
    .action-btn:hover {
        background-color: var(--primary);
        color: #fff;
        border-style: solid;
    }
</style>
</head>

<body>

    <div class="main-content">
        <div class="admin-left-main-content">
            <div class="admin-top-left-content"><div class="admin-menu">Snap2Bill <br> Admin Menu</div></div><hr>
            <div class="admin-mid-left-content">
                <div id="navbar-section">
                    <a class="nav-links" href="/admin_home"><div class="mid-left-navbars active"><i class="ri-home-4-line"></i><span>Home</span></div></a>
                    <a class="nav-links" href="/admin_viewcustomer"><div class="mid-left-navbars"><i class="ri-user-3-line"></i><span>View Customers</span></div></a>
                    <a class="nav-links" href="/admin_verify"><div class="mid-left-navbars"><i class="ri-shield-check-line"></i><span>Verify Distributors</span></div></a>
                    <a class="nav-links" href="/admin_verified"><div class="mid-left-navbars"><i class="ri-award-line"></i><span>View Verified Distributors</span></div></a>
                    <a class="nav-links" href="/admin_category"><div class="mid-left-navbars "><i class="ri-layout-grid-line"></i><span>Manage Category</span></div></a>
                    <a class="nav-links" href="/admin_review"><div class="mid-left-navbars"><i class="ri-star-line"></i><span>View Reviews</span></div></a>
                    <a class="nav-links" href="/customer_feedbacks"><div class="mid-left-navbars "><i class="ri-feedback-line"></i><span>View Customer Feedback</span></div></a>
                    <a class="nav-links" href="/distributor_feedbacks"><div class="mid-left-navbars "><i class="ri-feedback-line"></i><span>View Distributor Feedback</span></div></a>
                    <a class="nav-links" href="/view_product"><div class="mid-left-navbars "><i class="ri-multi-image-fill"></i><span>View products</span></div></a>
                </div>
            </div>
            <hr>
            <div class="admin-bottom-left-content">
                <div class="more-section"><span><i class="ri-settings-3-line"></i> Setting</span>
                    <div class="setting-dropdown">
                        <a href="/admin_setting"><div class="setting-menu-dropdown"><i class="ri-tools-line"></i> Settings</div></a>
                        <a id="themeToggle" type="button" class="setting-menu-dropdown theme-btn">
                            <i id="themeIcon" class="ri-sun-line"></i> Switch theme
                        </a>
                        <a href="/logout"><div class="setting-menu-dropdown"><i class="ri-logout-box-line"></i> Logout</div></a>
                    </div>
                </div>
            </div>
        </div>

        <div class="admin-right-main-content">

            <div class="dashboard-container">

                <div class="welcome-banner">
                    <h1>Dashboard Overview</h1>
                    <p>Welcome back, Admin. Here's what's happening today.</p>
                </div>

                <div class="stats-grid">

                    <div class="stat-card card-blue">
                        <div class="icon-box"><i class="ri-user-3-fill"></i></div>
                        <div class="stat-info">
                            <h3>{{ customer_count|default:"0" }}</h3>
                            <p>Total Customers</p>
                        </div>
                    </div>

                    <div class="stat-card card-orange">
                        <div class="icon-box"><i class="ri-time-fill"></i></div>
                        <div class="stat-info">
                            <h3>{{ pending_count|default:"0" }}</h3>
                            <p>Pending Verifications</p>
                        </div>
                    </div>

                    <div class="stat-card card-green">
                        <div class="icon-box"><i class="ri-shield-check-fill"></i></div>
                        <div class="stat-info">
                            <h3>{{ verified_count|default:"0" }}</h3>
                            <p>Verified Distributors</p>
                        </div>
                    </div>

                    <div class="stat-card card-purple">
                        <div class="icon-box"><i class="ri-shopping-bag-3-fill"></i></div>
                        <div class="stat-info">
                            <h3>{{ product_count|default:"0" }}</h3>
                            <p>Total Products</p>
                        </div>
                    </div>

                    <div class="stat-card card-red">
                        <div class="icon-box"><i class="ri-customer-service-2-line"></i></div>
                        <div class="stat-info">
                            <h3>{{ feedback_count|default:"0" }}</h3>
                            <p>Distributor Feedbacks</p>
                        </div>
                    </div>

                    <div class="stat-card card-teal">
                        <div class="icon-box"><i class="ri-message-2-line"></i></div>
                        <div class="stat-info">
                            <h3>{{ cust_feedback_count|default:"0" }}</h3>
                            <p>Customer Feedbacks</p>
                        </div>
                    </div>

                    <div class="stat-card card-yellow">
                        <div class="icon-box"><i class="ri-star-smile-line"></i></div>
                        <div class="stat-info">
                            <h3>{{ review_count|default:"0" }}</h3>
                            <p>Total Reviews</p>
                        </div>
                    </div>

                    <div class="stat-card card-indigo">
                        <div class="icon-box"><i class="ri-apps-fill"></i></div>
                        <div class="stat-info">
                            <h3>{{ category_count|default:"0" }}</h3>
                            <p>Total Categories</p>
                        </div>
                    </div>

                </div>

                <div class="section-header">
                    <div class="section-title">Quick Actions</div>
                </div>
                <div class="quick-actions-grid">
                    <a href="/admin_verify" class="action-btn">
                        <i class="ri-user-search-line"></i>
                        Verify New Users
                    </a>
                    <a href="/admin_category" class="action-btn">
                        <i class="ri-layout-masonry-line"></i>
                        Add Category
                    </a>
                    <a href="/view_product" class="action-btn">
                        <i class="ri-box-3-line"></i>
                        Manage Products
                    </a>
                    <a href="/admin_review" class="action-btn">
                        <i class="ri-star-half-line"></i>
                        Check Reviews
                    </a>
                </div>

            </div>

            {% if messages %}
            <div id="toast-container">
                {% for message in messages %}
                <div class="toast {{ message.tags }}">
                    {% if message.tags == 'success' %}‚úÖ{% elif message.tags == 'error' %}‚ö†Ô∏è{% endif %}
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}

        </div>
    </div>

<script>
    // Sidebar Dropdown Logic
    const moreBtn = document.querySelector(".more-section");
    const dropdown = document.querySelector(".setting-dropdown");
    let body = document.querySelector("body");

    moreBtn.addEventListener("click", function () {
        dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
    });

    body.addEventListener("click", function (event) {
        if (!moreBtn.contains(event.target) && !dropdown.contains(event.target)) {
            dropdown.style.display = "none";
        }
    });

    // Theme Toggle Logic
    const root = document.documentElement;
    const themeBtn = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');

    // Load initial state
    const savedTheme = localStorage.getItem('theme') || 'light';
    if(themeIcon) themeIcon.className = savedTheme === 'dark' ? 'ri-moon-line' : 'ri-sun-line';

    if(themeBtn) {
        themeBtn.addEventListener('click', () => {
            const current = root.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';

            root.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);

            if(themeIcon) themeIcon.className = next === 'dark' ? 'ri-moon-line' : 'ri-sun-line';
        });
    }
</script>

</body>
</html>